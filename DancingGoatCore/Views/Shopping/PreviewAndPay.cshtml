@model DancingGoat.Models.PreviewViewModel

@{
    ViewBag.Title = HtmlLocalizer["Preview"].Value;
    ViewData["PageClass"] = "inverted";
}

<div class="checkout-container">
    <div class="cart">
        <div class="continue-shopping-link">
            <a asp-action="DeliveryDetails">&larr; @HtmlLocalizer["back to Billing & Delivery"]</a>
        </div>

        <div class="row">
            <div asp-validation-summary="ModelOnly" class="ErrorLabel red">@HtmlLocalizer["Your order cannot be completed"]</div>
            <div>
                @Html.ValidationMessage("shipping", new { @class = "red" })
            </div>
            <div>
                @Html.ValidationMessage("cart.empty", new { @class = "red" })
            </div>
        </div>

        <div class="cart-content row">

            <div class="col-md-5 col-lg-5 cart-left-container">
                <div class="row">
                    <h2>@HtmlLocalizer["Billing details"]</h2>
                    @Html.DisplayFor(m => m.CustomerDetails)
                    <br />
                    <div class="hr"></div>
                </div>
                @if (Model.DeliveryDetails.ShippingOption.IsVisible)
                {
                    #region
                    var companyName = string.IsNullOrEmpty(Model.CustomerDetails.Company) ? "Komatsu company" : Model.CustomerDetails.Company;
                    #endregion
                    <div class="row">
                        <h2>@HtmlLocalizer["Shipping details"]</h2>
                        <div class="row">
                            <div class="col-md-4 col-lg-4">
                                <span class="sp-title">Shipping Name:</span>
                            </div>
                            <div class="col-md-8 col-lg-8">
                                <span>@Model.ShippingName</span>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-5 col-lg-5">
                                <span class="sp-title">Company Name:</span>
                            </div>
                            <div class="col-md-7 col-lg-7">
                                <span>@companyName</span>
                            </div>
                        </div>
                        <br>
                        @Html.DisplayFor(m => m.BillingAddress)
                    </div>
                }
            </div>

            <div class="col-md-7 col-lg-7 cart-right-container">
                <div class="row">
                    <h2>@HtmlLocalizer["Ordered items"]</h2>
                    <hr class="first-separator" />

                    <partial name="_ShoppingCartContentPreview" model="Model.CartModel" />
                </div>
                <br />
                <div class="col-md-6 col-lg-6 col-md-offset-0 col-lg-offset-0">
                    <div class="cart-right-panel floating-box">
                        <div id="shoppingCartTotals">
                            <partial name="_ShoppingCartTotals" model="Model.CartModel" />
                        </div>

                        <form asp-action="PreviewAndPay" asp-controller="Shopping" method="post">
                            @Html.EditorFor(m => m.PaymentMethod)
                            <input type="submit" value="@HtmlLocalizer["Confirm and pay"]" class="btn-primary checkout-button btn btn-default" />
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>